<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Example Password Form</title>
    <style>
    .valid {
                color: green;
            }
            .invalid {
                color: red;
            }
            .checkmark {
                display: inline-block;
                width: 16px;
                height: 16px;
                background-color: green;
                mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="white" d="M9 19l-7-7 1.41-1.41L9 16.17l12.59-12.59L24 6l-15 15z"/></svg>') no-repeat center;
                mask-size: contain;
            }
            #progress {
                width: 300px; /* Set a fixed width for the progress bar */
                height: 10px;
                background-color: #e0e0e0;
                border-radius: 5px;
                overflow: hidden;
                margin-top: 10px;
                position: relative; /* Position for the message */
            }
            #progress-bar {
                height: 100%;
                width: 0%;
                background-color: green;
                transition: width 0.3s;
            }
            #progress-message {
                position: absolute;
                top: -25px; /* Adjust position above the progress bar */
                left: 50%;
                transform: translateX(-50%);
                font-weight: bold;
                color: black;
            }
    </style>
  </head>
  <body>
<h1>Create Password</h1>
<form>
    <p>
        <label for="password">Password:</label>
        <input type="password" name="password" id="password" aria-describedby="password-requirements passwordmeter passwordmessage" required aria-required="true" autocomplete="new-password">
       <span id="inline-message" role="alert" aria-live="assertive"></span>
    </p>
    <span id="passwordmeter">
        <span></span>
    </span>
    <div id="progress">
        <div id="progress-bar"></div>
      <div id="progress-message" role="alert" aria-live="polite" ></div>
    </div>
    <span aria-live="polite" id="progress-description">0 von 3 Anforderungen erfüllt</span>
    <ul id="password-requirements">
        <li id="length" class="condition">Viele Zeichen</li>
        <li id="case" class="condition">Groß- und Kleinschreibung</li>
        <li id="number" class="condition">Zahlen</li>
    </ul>
</form>
  </body>
<script>
const passwordInput = document.getElementById('password');
    const conditions = {
        length: document.getElementById('length'),
        case: document.getElementById('case'),
        number: document.getElementById('number')
    };
    const progressBar = document.getElementById('progress-bar');
    const progressMessage = document.getElementById('progress-message');
    const progressDescription = document.getElementById('progress-description')
    const errorHint = document.getElementById('inline-message');

    passwordInput.addEventListener('input', () => {
        let score = 0;
        let progress = 0;
        let message = '';
        let description = '0 von 3 Anforderungen erfüllt';
        let hint = '';

        for (let condition in conditions) {
            conditions[condition].classList.remove('valid');
            conditions[condition].classList.remove('invalid');
            conditions[condition].innerHTML =     conditions[condition].textContent;
        }

        const password = passwordInput.value;

        if (password.length >= 8) {
            conditions.length.classList.add('valid');
            conditions.length.innerHTML += ' <span class="checkmark"></span>';
            score++;
        }

        if (/[A-Z]/.test(password) && /[a-z]/.test(password)) {
            conditions.case.classList.add('valid');
            conditions.case.innerHTML += ' <span class="checkmark"></span>';
            score++;
        }

        if (/\d/.test(password)) {
            conditions.number.classList.add('valid');
            conditions.number.innerHTML += ' <span class="checkmark"></span>';
            score++;
        }

        switch (score) {
            case 0:
                message = 'Invalid';
                progress = 0;
                description = "0 von 3 Anforderungen erfüllt";
                hint = 'Dein Password ist ungültig';
                break;
            case 1:
                message = 'Weak';
                progress = 33;
                description = "1 von 3 Anforderungen erfüllt";
                hint = '';
                break;
            case 2:
                message = 'Good';
                progress = 66;
                description = "2 von 3 Anforderungen erfüllt";
                hint = '';
                break;
            case 3:
                message = 'Strong';
                progress = 100;
                description = "3 von 3 Anforderungen erfüllt";
                hint = '';
                break;
        }
        progressBar.style.width = progress + '%';
        progressMessage.textContent = message;
        progressDescription.textContent = description;
        errorHint.textContent = hint;
    });
</script>
</html>
